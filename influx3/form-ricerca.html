<!DOCTYPE html>
<html>
  <head>
    <meta
      name="generator"
      content="HTML Tidy for HTML5 for Apple macOS version 5.8.0"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/admin-lte@3.2/dist/css/adminlte.min.css"
    />

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/tempusdominus-bootstrap-4/5.39.0/css/tempusdominus-bootstrap-4.min.css"
      integrity="sha512-3JRrEUwaCkFUBLK1N8HehwQgu8e23jTH4np5NHOmQOobuC4ROQxFwFgBLTnhcnQRMs84muMh0PnnwXlPq5MGjg=="
      crossorigin="anonymous"
    />

    <link
      rel="stylesheet"
      type="text/css"
      href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css"
    />

    <script
      defer
      src="https://use.fontawesome.com/releases/v5.15.4/js/all.js"
      integrity="sha384-rOA1PnstxnOBLzCLMcre8ybwbTmemjzdNlILg8O7z1lUkLXozs4DHonlDtnE7fpc"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://code.jquery.com/jquery-3.6.0.min.js"
      integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
      crossorigin="anonymous"
    ></script>
    <script src="https://cdn.jsdelivr.net/npm/admin-lte@3.2/dist/js/adminlte.min.js"></script>
    <script
      type="text/javascript"
      src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"
    ></script>

    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/tempusdominus-bootstrap-4/5.39.0/js/tempusdominus-bootstrap-4.min.js"
      integrity="sha512-k6/Bkb8Fxf/c1Tkyl39yJwcOZ1P4cRrJu77p83zJjN2Z55prbFHxPs9vN7q3l3+tSMGPDdoH51AEU8Vgo1cgAA=="
      crossorigin="anonymous"
    ></script>

    <script
      type="text/javascript"
      src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"
    ></script>

    <link rel="stylesheet" href="css/form-ricerca.css" />

    <title>Poste 1</title>
  </head>
  <body class="sidebar-collapse">
    <div class="wrapper">
      <div class="content-wrapper" style="min-height: 244.75px">
        <div class="content-header">
          <div class="container-fluid">
            <div class="row mb-2">
              <!--mb margin bottom-->
              <div class="col-sm-6">
                <h1 class="m-0">Ricerca Dati</h1>
              </div>
            </div>
          </div>
        </div>

        <div class="content">
          <div class="container-fluid">
            <div class="row">
              <div class="col-lg-12">
                <div class="card">
                  <div class="card-body">
                    <div class="row">
                      <div class="col-sm-12">
                        <div class="form-group">
                          <label>Date and time range:</label>
                          <div class="input-group">
                            <div class="input-group-prepend">
                              <span class="input-group-text"
                                ><i class="far fa-clock"></i
                              ></span>
                            </div>

                            <input
                              type="text"
                              class="form-control float-right"
                              id="reservationtime"
                            />
                          </div>
                        </div>
                      </div>
                    </div>

                    <div class="row">
                      <div class="col-sm-12"></div>
                    </div>

                    <div class="form-group">
                      <label>Plant</label
                      ><select id="select_plant" class="form-control">
                        <option value="log">log</option>
                        <option value="poste0">poste0</option>
                        <option value="poste1">poste1</option>
                      </select>
                    </div>

                    <div class="form-group">
                      <label>Timeframe</label
                      ><select id="select_timeframe" class="form-control">
                        <option value="30m">Ogni 30 minuti</option>
                        <option value="1h">Ogni 1 ora</option>
                        <option value="2h">Ogni 2 ore</option>
                        <option value="3h">Ogni 3 ore</option>
                      </select>
                    </div>
                    <button class="btn btn-primary" type="button">
                      Carica Ripporto
                    </button>
                    <!--parent.location='ripporto.html'-->
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <footer class="main-footer">
        <strong
          >Copyright &copy; 2022
          <a href="https://canavisia.com">Canavisia</a>.</strong
        >All rights reserved.
      </footer>
      <div id="sidebar-overlay"></div>
    </div>

    <script>
      /*
        function updateHTML(elmId, value) {
        var elem = document.getElementById(elmId);
        if (typeof elem !== "undefined" && elem !== null) {
          elem.innerHTML = value;
        }
      }
      */

      $(document).ready(function () {
        $("button").click(function () {
          //$("p").text("Hello World!");

          var reservationtime = document.getElementById("reservationtime").value;
          var timeframe = document.getElementById("select_timeframe").value;
          var plant = document.getElementById("select_plant").value;

          localStorage.setItem("reservationtime", reservationtime);
          localStorage.setItem("timeframe", timeframe);
          localStorage.setItem("plant", plant);

          window.parent.location = "ripporto.html";
        });
      });
    </script>

    <script>
      var endDate = (new Date().getTime() / 1000).toFixed(0);
      var startDate = endDate - 60 * 60 * 24;
      $(function () {
        $("#reservationtime").daterangepicker({
          startDate: new Date(startDate * 1000),
          endDate: new Date(endDate * 1000),
          timePicker: true,
          timePickerIncrement: 60,
          timePicker24Hour: true,
          ranges: {
            "1 Giorno": [moment().subtract(1, "days")],
            "1 Settimana": [moment().subtract(7, "days"), moment()],
            "1 Mese": [moment().subtract(30, "days"), moment()],
          },
          locale: {
            format: "DD/MM/YYYY HH:mm",
          },
        });

        $("#reservationtime").on(
          "apply.daterangepicker",
          function (ev, picker) {
            sd = new Date(picker.startDate.format("YYYY-MM-DDTHH:mm:ss"));
            ed = new Date(picker.endDate.format("YYYY-MM-DDTHH:mm:ss"));
            startDate = (sd.getTime() / 1000).toFixed(0);
            endDate = (ed.getTime() / 1000).toFixed(0);
          }
        );
      });

      /*
      function downloadData() {
        var st = document.getElementById("select_timeframe");
        var apikey = document.getElementById("select_plant").value;
        if (apikey.includes("-")) {
          var split = apikey.split("-");
          apikey = split[0];
          apikey2 = split[1];
          window.location =
            "/data?apikey=" +
            apikey +
            "&apikey2=" +
            apikey2 +
            "&timeframe=" +
            st.options[st.selectedIndex].value +
            "&start=" +
            startDate +
            "&stop=" +
            endDate;
        } else {
          window.location =
            "/data?apikey=" +
            apikey +
            "&timeframe=" +
            st.options[st.selectedIndex].value +
            "&start=" +
            startDate +
            "&stop=" +
            endDate;
        }
      }
      */
    </script>
  </body>
</html>
